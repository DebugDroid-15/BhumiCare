<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŒ± BhumiCare Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    background: #f0f4f8;
    color: #1b5e20;
}
header {
    text-align: center;
    padding: 16px 0;
    background: #2e7d32;
    color: white;
    font-size: 26px;
    font-weight: 700;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
.controls {
    text-align: center;
    margin: 12px 0;
}
select {
    padding: 8px 12px;
    font-size: 14px;
    border-radius: 8px;
    border: 1px solid #2e7d32;
    width: 90%;
    max-width: 300px;
}
.cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 16px;
    padding: 16px;
}
.card {
    background: #fff;
    border-radius: 12px;
    padding: 16px;
    box-shadow: 0 4px 14px rgba(0,0,0,0.12);
    text-align: center;
}
.card h3 {
    margin: 0 0 8px 0;
    font-size: 16px;
    color: #2e7d32;
}
.card .value {
    font-size: 28px;
    font-weight: 600;
    color: #1b5e20;
}
.suggestions {
    max-width: 1200px;
    margin: 20px auto;
    padding: 12px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 14px rgba(0,0,0,0.1);
}
.suggestions h3 {
    margin-top: 0;
}
.suggestions ul {
    margin: 8px 0 0 20px;
}
.map-container {
    margin: 20px auto;
    width: 95%;
    height: 450px;
    border-radius: 12px;
    overflow: hidden;
}
@media(max-width:640px){
    .cards {
        grid-template-columns: repeat(auto-fit, minmax(150px,1fr));
    }
}
</style>
</head>
<body>

<header>ðŸŒ± Smart Agronomist Dashboard</header>

<div class="cards" id="sensorCards">
    <div class="card"><h3>Soil Moisture (%)</h3><div class="value" id="moistureNPK">0</div></div>
    <div class="card"><h3>Soil Temperature (Â°C)</h3><div class="value" id="tempNPK">0</div></div>
    <div class="card"><h3>Humidity (Â°C)</h3><div class="value" id="temperatureDHT">0</div></div>
    <div class="card"><h3>EC (ÂµS/cm)</h3><div class="value" id="ec">0</div></div>
    <div class="card"><h3>N (ppm)</h3><div class="value" id="N">0</div></div>
    <div class="card"><h3>P (ppm)</h3><div class="value" id="P">0</div></div>
    <div class="card"><h3>K (ppm)</h3><div class="value" id="K">0</div></div>
    <div class="card"><h3>Fertility Index</h3><div class="value" id="fertilityIndex">0</div></div>
    <div class="card"><h3>TDS (ppm)</h3><div class="value" id="TDS">0</div></div>
    <div class="card"><h3>Salinity Index</h3><div class="value" id="salinityIndex">0</div></div>
    <div class="card"><h3>pH Level</h3><div class="value" id="pH">0</div></div>
    <div class="card"><h3>Moisture Stress</h3><div class="value" id="moistureStress">0</div></div>
    <div class="card"><h3>Temperature Stress</h3><div class="value" id="tempStress">0</div></div>
    <div class="card"><h3>NPK Ratio N</h3><div class="value" id="NPKRatioN">0</div></div>
    <div class="card"><h3>NPK Ratio P</h3><div class="value" id="NPKRatioP">0</div></div>
    <div class="card"><h3>NPK Ratio K</h3><div class="value" id="NPKRatioK">0</div></div>
    <div class="card"><h3>Soil Organic Proxy</h3><div class="value" id="soilOrganicProxy">0</div></div>
    <div class="card"><h3>Irrigation Recommendation</h3><div class="value" id="irrigationRec">0</div></div>
    <div class="card"><h3>MQ2</h3><div class="value" id="mq2Raw">0</div></div>
    <div class="card"><h3>Soil Moisture Raw</h3><div class="value" id="soilMoistureRaw">0</div></div>
</div>


<div class="map-container">
  <iframe id="gmap" width="100%" height="100%" frameborder="0" style="border:0"
    src="https://www.google.com/maps/embed/v1/place?key=AIzaSyD7YHaxjiMaPXsWuGiQHO4ElY2SST7K_hw&q=India" allowfullscreen>
  </iframe>
</div>

<script>
const FIREBASE_HOST = "bhumicare-b6713-default-rtdb.firebaseio.com";

// Card IDs mapping to Firebase keys
const ids = [
    "moistureNPK","tempNPK","temperatureDHT","ec","N","P","K",
    "fertilityIndex","TDS","salinityIndex","pH",
    "moistureStress","tempStress","NPKRatioN","NPKRatioP","NPKRatioK",
    "soilOrganicProxy","irrigationRec","mq2Raw","ldrRaw","soilMoistureRaw"
];

// Example crop suggestions (same as before, 5 per crop)
const cropSuggestions = {
  { name: 'Rice', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <35%', 'Check for pests regularly'] },
    { name: 'Wheat', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7.5', 'Irrigate if soil moisture <30%', 'Ensure crop rotation'] },
    { name: 'Maize', suggestions: ['Maintain soil moisture 65-75%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if soil moisture <40%', 'Check for pest infestations'] },
    { name: 'Barley', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <25%', 'Ensure proper drainage'] },
    { name: 'Sorghum', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Check for pest infestations'] },
    { name: 'Pearl Millet', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <20%', 'Ensure proper drainage'] },
    { name: 'Finger Millet', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Check for pest infestations'] },
    { name: 'Pulses', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <20%', 'Ensure proper drainage'] },
    { name: 'Groundnut', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Check for pest infestations'] },
    { name: 'Soybean', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Ensure proper drainage'] },
    { name: 'Cotton', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Check for pest infestations'] },
    { name: 'Sugarcane', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if soil moisture <35%', 'Ensure proper drainage'] },
    { name: 'Tobacco', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Check for pest infestations'] },
    { name: 'Oilseeds', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if soil moisture <25%', 'Ensure proper drainage'] },
    { name: 'Tea', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <35%', 'Check for pests regularly'] },
    { name: 'Coffee', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Ensure proper drainage'] },
    { name: 'Coconut', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <35%', 'Check for pests regularly'] },
    { name: 'Areca Nut', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <35%', 'Check for pests regularly'] },
    { name: 'Banana', suggestions: ['Maintain soil moisture 75-85%', 'Apply NPK fertilizer as per growth stage', 'Monitor pH 6-7', 'Irrigate if soil moisture <40%', 'Ensure proper drainage'] },
    { name: 'Papaya', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <35%', 'Protect from strong winds'] },
    { name: 'Mango', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate during dry spells', 'Check for mango hoppers and pests'] },
    { name: 'Guava', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Prune regularly'] },
    { name: 'Pomegranate', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <25%', 'Ensure proper drainage'] },
    { name: 'Litchi', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate during dry spells', 'Protect young plants from frost'] },
    { name: 'Sapota', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Mulch around roots to retain moisture'] },
    { name: 'Jackfruit', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <35%', 'Check for fruit borer'] },
    { name: 'Cashew', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate during dry spells', 'Protect from anthracnose disease'] },
    { name: 'Chikoo (Sapodilla)', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Prune to maintain canopy'] },
    { name: 'Strawberry', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 5.5-6.5', 'Irrigate during dry spells', 'Ensure proper drainage'] },
    { name: 'Tomato', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Check for leaf curl virus'] },
    { name: 'Brinjal (Eggplant)', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Check for shoot and fruit borer'] },
    { name: 'Chili', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Check for pests regularly'] },
    { name: 'Capsicum', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Ensure proper sunlight'] },
    { name: 'Cucumber', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate during dry spells', 'Provide trellis support'] },
    { name: 'Bottle Gourd', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Train vines properly'] },
    { name: 'Pumpkin', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Control powdery mildew'] },
    { name: 'Bitter Gourd', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Support climbing'] },
    { name: 'Snake Gourd', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Provide trellis support'] },
    { name: 'Okra (Lady Finger)', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Check for pests and blight'] },
    { name: 'Cabbage', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Protect from whiteflies and pests'] },
    { name: 'Cauliflower', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Check for aphids'] },
    { name: 'Carrot', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Ensure loose soil for root growth'] },
    { name: 'Radish', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Check for pests'] },
    { name: 'Beetroot', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Ensure loose soil for roots'] },
    { name: 'Spinach', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Harvest leaves periodically'] },
    { name: 'Fenugreek', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Check for pests'] },
    { name: 'Coriander', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Harvest leaves periodically'] },
    { name: 'Mint', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Harvest leaves as needed'] },
    { name: 'Basil', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Harvest leaves as needed'] },
    { name: 'Lettuce', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Protect from pests'] },
    { name: 'Kale', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Check for aphids'] },
    { name: 'Mustard', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Check for pests and disease'] },
    { name: 'Sunflower', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <40%', 'Support stems if needed'] },
    { name: 'Groundnut', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Ensure proper drainage'] },
    { name: 'Soybean', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <35%', 'Monitor for pests'] },
    { name: 'Green Gram', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate as needed', 'Harvest at maturity'] },
    { name: 'Black Gram', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Check for pests'] },
    { name: 'Red Gram', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate as needed', 'Protect from pod borers'] },
    { name: 'Chickpea', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <35%', 'Ensure good soil drainage'] },
    { name: 'Pigeon Pea', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate as needed', 'Check for pests'] },
    { name: 'Cowpea', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Harvest pods timely'] },
    { name: 'Sesame', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if dry', 'Protect from pests'] },
    { name: 'Sunflower', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Ensure proper sunlight'] },
    { name: 'Cotton', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate during dry spells', 'Check for bollworm and pests'] },
    { name: 'Sugarcane', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Ensure proper drainage'] },
    { name: 'Tobacco', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Protect from leaf diseases'] },
    { name: 'Tea', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 5-6', 'Irrigate as needed', 'Pluck leaves carefully'] },
    { name: 'Coffee', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 5-6', 'Irrigate regularly', 'Protect from pests'] },
    { name: 'Rubber', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 5-6', 'Irrigate as needed', 'Check for fungal infections'] },
    { name: 'Coconut', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Protect from pests and wind'] },
    { name: 'Maize', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Check for stem borer'] },
    { name: 'Rice', suggestions: ['Maintain soil moisture 70-80%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate as needed', 'Ensure water management'] },
    { name: 'Wheat', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if dry', 'Check for rust and pests'] },
    { name: 'Barley', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate as needed', 'Protect from fungal infections'] },
    { name: 'Oats', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Check for aphids'] },
    { name: 'Sorghum', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate as needed', 'Check for stem borer'] },
    { name: 'Pearl Millet', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate if soil moisture <30%', 'Check for pests'] },
    { name: 'Foxtail Millet', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate as needed', 'Harvest timely'] },
    { name: 'Little Millet', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Check for pests'] },
    { name: 'Kodo Millet', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if dry', 'Harvest at maturity'] },
    { name: 'Barnyard Millet', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Check for pests'] },
    { name: 'Finger Millet', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate as needed', 'Ensure good soil aeration'] },
    { name: 'Proso Millet', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Harvest timely'] },
    { name: 'Buckwheat', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate as needed', 'Protect from pests'] },
    { name: 'Quinoa', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Ensure good sunlight'] },
    { name: 'Amaranth', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Harvest leaves periodically'] },
    { name: 'Chia', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Protect from pests'] },
    { name: 'Flax', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate as needed', 'Harvest at seed maturity'] },
    { name: 'Sunflower', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Support tall stems'] },
    { name: 'Sesbania', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Use as green manure'] },
    { name: 'Vigna', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Harvest pods timely'] },
    { name: 'Arhar (Tur)', suggestions: ['Maintain soil moisture 40-50%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate if dry', 'Check for pests'] },
    { name: 'Peas', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Support climbing'] },
    { name: 'Sweet Potato', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Ensure loose soil for roots'] },
    { name: 'Yam', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate regularly', 'Check for pests'] },
    { name: 'Taro', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Protect from fungal diseases'] },
    { name: 'Arrowroot', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Ensure proper drainage'] },
    { name: 'Ginger', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Mulch around roots'] },
    { name: 'Turmeric', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Mulch and protect rhizomes'] },
    { name: 'Garlic', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Protect from pests'] },
    { name: 'Onion', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Ensure good sunlight'] },
    { name: 'Shallots', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Check for pests'] },
    { name: 'Leek', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Protect from diseases'] },
    { name: 'Celery', suggestions: ['Maintain soil moisture 60-70%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Ensure proper spacing'] },
    { name: 'Asparagus', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer appropriately', 'Monitor pH 6-7', 'Irrigate as needed', 'Support shoots if needed'] },
    { name: 'Artichoke', suggestions: ['Maintain soil moisture 50-60%', 'Apply NPK fertilizer as per stage', 'Monitor pH 6-7', 'Irrigate regularly', 'Protect from pests'] }
};

// Fetch sensor data from Firebase
async function fetchData() {
    try{
        let res = await fetch(`https://${FIREBASE_HOST}/SensorData.json`);
        let data = await res.json();
        let keys = Object.keys(data);
        let latest = data[keys[keys.length-1]];

        ids.forEach(id => {
            document.getElementById(id).textContent = latest[id] !== undefined ? latest[id] : 0;
        });

        // Update suggestions
        function updateSuggestions() {
          const selected = document.getElementById("cropSelect").value;
          const crop = cropSuggestions.find(c => c.name === selected);
          const list = document.getElementById("suggestionList");
          if(crop) {
            list.innerHTML = crop.suggestions.map(s => `<li>${s}</li>`).join("");
          } else {
            list.innerHTML = "<li>No suggestions available.</li>";
          }
        }

        // Update Google Map
        let lat = latest.gpsLat || 20.5937;
        let lng = latest.gpsLng || 78.9629;
        document.getElementById("gmap").src = `https://www.google.com/maps/embed/v1/place?key=AIzaSyD7YHaxjiMaPXsWuGiQHO4ElY2SST7K_hw&q=${lat},${lng}`;
    } catch(err){
        console.error("Failed to fetch Firebase data",err);
    }
}

// On page load and crop change
window.onload = fetchData;
document.getElementById("cropSelect").addEventListener("change", fetchData);
setInterval(fetchData, 10000); // Every 10 sec
</script>

</body>
</html>
